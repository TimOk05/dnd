<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DM Copilot - AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤ D&D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .card { @apply bg-white rounded-lg shadow-md border border-gray-200; }
        .btn { @apply px-6 py-3 rounded-lg font-medium transition-colors text-base; }
        .btn-primary { @apply bg-primary-600 text-white hover:bg-primary-700; }
        .btn-outline { @apply border border-gray-300 text-gray-700 hover:bg-gray-50; }
        .btn-sm { @apply px-4 py-2 text-sm; }
        body { font-size: 16px; }
        .container { max-width: 1200px; }
        .loading { @apply animate-pulse bg-gray-200; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-8 py-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-gray-900 mb-4">üé≤ DM Copilot</h1>
            <p class="text-2xl text-gray-600">AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤ D&D</p>
            <div class="mt-4 p-3 bg-green-100 rounded-lg inline-block">
                <span class="text-green-800 font-medium">ü§ñ AI –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex justify-center mb-8">
            <div class="flex space-x-2 bg-white rounded-lg p-2 shadow-sm">
                <button onclick="showTab('home')" class="tab-btn active px-6 py-3 rounded-md text-lg">üè† –ì–ª–∞–≤–Ω–∞—è</button>
                <button onclick="showTab('tables')" class="tab-btn px-6 py-3 rounded-md text-lg">üìä –¢–∞–±–ª–∏—Ü—ã</button>
                <button onclick="showTab('session')" class="tab-btn px-6 py-3 rounded-md text-lg">üé≠ –°–µ—Å—Å–∏—è</button>
                <button onclick="showTab('ai')" class="tab-btn px-6 py-3 rounded-md text-lg">ü§ñ AI –ü–æ–¥—Å–∫–∞–∑–∫–∏</button>
            </div>
        </div>

        <!-- Home Tab -->
        <div id="home" class="tab-content">
            <div class="grid grid-cols-4 gap-8 mb-8">
                <div class="card p-8 text-center">
                    <div class="text-4xl mb-4">üìö</div>
                    <h3 class="text-xl font-semibold mb-3">Knowledge Ingestion</h3>
                    <p class="text-base text-gray-600">–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª–µ–π</p>
                </div>
                <div class="card p-8 text-center">
                    <div class="text-4xl mb-4">üìä</div>
                    <h3 class="text-xl font-semibold mb-3">Tables Engine</h3>
                    <p class="text-base text-gray-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</p>
                </div>
                <div class="card p-8 text-center">
                    <div class="text-4xl mb-4">üé≠</div>
                    <h3 class="text-xl font-semibold mb-3">Session Runner</h3>
                    <p class="text-base text-gray-600">–í–µ–¥–µ–Ω–∏–µ D&D —Å–µ—Å—Å–∏–π</p>
                </div>
                <div class="card p-8 text-center">
                    <div class="text-4xl mb-4">ü§ñ</div>
                    <h3 class="text-xl font-semibold mb-3">AI Assistant</h3>
                    <p class="text-base text-gray-600">–£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ—Ç DeepSeek</p>
                </div>
            </div>

            <div class="card p-8 mb-8">
                <h2 class="text-3xl font-bold mb-6">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                <div class="grid grid-cols-4 gap-6">
                    <button onclick="generateRandom('npc')" class="btn btn-outline flex flex-col items-center p-6 h-32">
                        <span class="text-4xl mb-3">üë§</span>
                        <span class="text-base">–°–ª—É—á–∞–π–Ω—ã–π NPC</span>
                    </button>
                    <button onclick="generateRandom('tavern')" class="btn btn-outline flex flex-col items-center p-6 h-32">
                        <span class="text-4xl mb-3">üè™</span>
                        <span class="text-base">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–≤–µ—Ä–Ω—ã</span>
                    </button>
                    <button onclick="generateRandom('potion')" class="btn btn-outline flex flex-col items-center p-6 h-32">
                        <span class="text-4xl mb-3">üß™</span>
                        <span class="text-base">–°–ª—É—á–∞–π–Ω–æ–µ –∑–µ–ª—å–µ</span>
                    </button>
                    <button onclick="rollDice()" class="btn btn-outline flex flex-col items-center p-6 h-32">
                        <span class="text-4xl mb-3">üé≤</span>
                        <span class="text-base">–ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏</span>
                    </button>
                </div>
            </div>

            <div class="card p-8">
                <h2 class="text-3xl font-bold mb-6">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="grid grid-cols-3 gap-8 text-center">
                    <div>
                        <div class="text-4xl font-bold text-primary-600">5</div>
                        <div class="text-lg text-gray-600">–¢–∞–±–ª–∏—Ü –¥–∞–Ω–Ω—ã—Ö</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-green-600">25</div>
                        <div class="text-lg text-gray-600">–ó–∞–ø–∏—Å–µ–π</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-purple-600">0</div>
                        <div class="text-lg text-gray-600">–°–µ—Å—Å–∏–π</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tables Tab -->
        <div id="tables" class="tab-content hidden">
            <div class="card p-8 mb-8">
                <h2 class="text-3xl font-bold mb-8">–¢–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö</h2>
                <div class="grid grid-cols-3 gap-6">
                    <div class="border rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-3">üç∫ –ù–∞–ø–∏—Ç–∫–∏</h3>
                        <p class="text-base text-gray-600 mb-4">–ê–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –∏ –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏</p>
                        <div class="flex gap-3">
                            <button onclick="showTableData('drinks')" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button onclick="generateRandom('drink')" class="btn btn-sm btn-outline">–°–ª—É—á–∞–π–Ω—ã–π</button>
                        </div>
                    </div>
                    <div class="border rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-3">üë§ NPC</h3>
                        <p class="text-base text-gray-600 mb-4">–ù–µ–∏–≥—Ä–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏</p>
                        <div class="flex gap-3">
                            <button onclick="showTableData('npcs')" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button onclick="generateRandom('npc')" class="btn btn-sm btn-outline">–°–ª—É—á–∞–π–Ω—ã–π</button>
                        </div>
                    </div>
                    <div class="border rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-3">üß™ –ó–µ–ª—å—è</h3>
                        <p class="text-base text-gray-600 mb-4">–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–µ–ª—å—è –∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞</p>
                        <div class="flex gap-3">
                            <button onclick="showTableData('potions')" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button onclick="generateRandom('potion')" class="btn btn-sm btn-outline">–°–ª—É—á–∞–π–Ω—ã–π</button>
                        </div>
                    </div>
                    <div class="border rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-3">üó°Ô∏è –°–æ–±—ã—Ç–∏—è –≤ –ø—É—Ç–∏</h3>
                        <p class="text-base text-gray-600 mb-4">–°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</p>
                        <div class="flex gap-3">
                            <button onclick="showTableData('events')" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button onclick="generateRandom('event')" class="btn btn-sm btn-outline">–°–ª—É—á–∞–π–Ω—ã–π</button>
                        </div>
                    </div>
                    <div class="border rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-3">üè™ –ù–∞–∑–≤–∞–Ω–∏—è —Ç–∞–≤–µ—Ä–Ω</h3>
                        <p class="text-base text-gray-600 mb-4">–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è —Ç–∞–≤–µ—Ä–Ω</p>
                        <div class="flex gap-3">
                            <button onclick="showTableData('taverns')" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button onclick="generateRandom('tavern')" class="btn btn-sm btn-outline">–°–ª—É—á–∞–π–Ω—ã–π</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tableData" class="card p-8 hidden">
                <h3 id="tableTitle" class="text-2xl font-bold mb-6"></h3>
                <div id="tableContent" class="space-y-3"></div>
                <button onclick="hideTableData()" class="btn btn-outline mt-6">‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–∞–±–ª–∏—Ü–∞–º</button>
            </div>
        </div>

        <!-- Session Tab -->
        <div id="session" class="tab-content hidden">
            <div class="grid grid-cols-3 gap-8">
                <!-- Session Stages -->
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-6">–≠—Ç–∞–ø —Å–µ—Å—Å–∏–∏</h3>
                    <div class="space-y-3">
                        <button onclick="setStage('hook')" class="stage-btn active w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">üé£ –ó–∞—Ü–µ–ø–∫–∞</div>
                            <div class="text-base opacity-75">–ù–∞—á–∞–ª–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</div>
                        </button>
                        <button onclick="setStage('exploration')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">üó∫Ô∏è –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ</div>
                            <div class="text-base opacity-75">–ò–∑—É—á–µ–Ω–∏–µ –º–∏—Ä–∞</div>
                        </button>
                        <button onclick="setStage('combat')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">‚öîÔ∏è –ë–æ–π</div>
                            <div class="text-base opacity-75">–°—Ä–∞–∂–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã</div>
                        </button>
                        <button onclick="setStage('social')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">ü§ù –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ</div>
                            <div class="text-base opacity-75">–î–∏–ø–ª–æ–º–∞—Ç–∏—è –∏ —Ç–æ—Ä–≥–æ–≤–ª—è</div>
                        </button>
                        <button onclick="setStage('puzzle')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">üß© –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞</div>
                            <div class="text-base opacity-75">–ó–∞–≥–∞–¥–∫–∏ –∏ –ª–æ–≤—É—à–∫–∏</div>
                        </button>
                        <button onclick="setStage('climax')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">üî• –ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è</div>
                            <div class="text-base opacity-75">–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ</div>
                        </button>
                        <button onclick="setStage('resolution')" class="stage-btn w-full text-left p-4 rounded-lg">
                            <div class="font-medium text-lg">üèÅ –†–∞–∑–≤—è–∑–∫–∞</div>
                            <div class="text-base opacity-75">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</div>
                        </button>
                    </div>
                </div>

                <!-- Master Notes -->
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-6">–ó–∞–º–µ—Ç–∫–∏ –º–∞—Å—Ç–µ—Ä–∞</h3>
                    <textarea id="masterNotes" placeholder="–ó–∞–ø–∏—à–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, –ø–ª–∞–Ω—ã, –∏–¥–µ–∏..." 
                              class="w-full h-48 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-primary-500 text-base"></textarea>
                    <div class="mt-4 text-base text-gray-600">
                        –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø: <span id="currentStage" class="font-medium">üé£ –ó–∞—Ü–µ–ø–∫–∞</span>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card p-6">
                    <h3 class="text-xl font-semibold mb-6">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="space-y-3">
                        <button onclick="rollDice()" class="btn btn-outline w-full justify-start text-base">
                            üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏ (d20)
                        </button>
                        <button onclick="generateRandom('tavern')" class="btn btn-outline w-full justify-start text-base">
                            üè™ –°–ª—É—á–∞–π–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞
                        </button>
                        <button onclick="generateRandom('potion')" class="btn btn-outline w-full justify-start text-base">
                            üß™ –°–ª—É—á–∞–π–Ω–æ–µ –∑–µ–ª—å–µ
                        </button>
                        <button onclick="generateRandom('npc')" class="btn btn-outline w-full justify-start text-base">
                            üó£Ô∏è –°–ª—É—á–∞–π–Ω—ã–π NPC
                        </button>
                        <button onclick="generateRandom('drink')" class="btn btn-outline w-full justify-start text-base">
                            üç∫ –°–ª—É—á–∞–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Tab -->
        <div id="ai" class="tab-content hidden">
            <div class="card p-8 mb-8">
                <h2 class="text-3xl font-bold mb-8">ü§ñ AI –ü–æ–¥—Å–∫–∞–∑–∫–∏</h2>
                
                <!-- Context Input -->
                <div class="mb-6">
                    <label class="block text-lg font-medium mb-3">–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏:</label>
                    <textarea id="sessionContext" placeholder="–û–ø–∏—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é, –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –ª–æ–∫–∞—Ü–∏—é..." 
                              class="w-full h-24 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-primary-500 text-base"></textarea>
                </div>

                <!-- AI Type Selection -->
                <div class="grid grid-cols-3 gap-6 mb-8">
                    <button onclick="setAIType('plot_twist')" class="ai-type-btn active p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">üé≠</div>
                        <div class="font-medium text-lg">–ü–æ–≤–æ—Ä–æ—Ç —Å—é–∂–µ—Ç–∞</div>
                        <div class="text-base text-gray-600">–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã</div>
                    </button>
                    <button onclick="setAIType('npc_dialogue')" class="ai-type-btn p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">üó£Ô∏è</div>
                        <div class="font-medium text-lg">–î–∏–∞–ª–æ–≥ NPC</div>
                        <div class="text-base text-gray-600">–ñ–∏–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏</div>
                    </button>
                    <button onclick="setAIType('scene_description')" class="ai-type-btn p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">üè∞</div>
                        <div class="font-medium text-lg">–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã</div>
                        <div class="text-base text-gray-600">–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è</div>
                    </button>
                    <button onclick="setAIType('loot_suggestion')" class="ai-type-btn p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">üíé</div>
                        <div class="font-medium text-lg">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ª—É—Ç–∞</div>
                        <div class="text-base text-gray-600">–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</div>
                    </button>
                    <button onclick="setAIType('skill_check')" class="ai-type-btn p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">üé≤</div>
                        <div class="font-medium text-lg">–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤—ã–∫–æ–≤</div>
                        <div class="text-base text-gray-600">–õ–æ–≥–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏</div>
                    </button>
                    <button onclick="setAIType('combat_encounter')" class="ai-type-btn p-6 border rounded-lg text-center">
                        <div class="text-4xl mb-3">‚öîÔ∏è</div>
                        <div class="font-medium text-lg">–ë–æ–µ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞</div>
                        <div class="text-base text-gray-600">–¢–∞–∫—Ç–∏–∫–∞ –∏ –º–æ–Ω—Å—Ç—Ä—ã</div>
                    </button>
                </div>

                <!-- Generate Button -->
                <button onclick="generateAISuggestion()" id="generateBtn" class="btn btn-primary w-full text-lg">
                    ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é AI
                </button>
            </div>

            <!-- AI Result -->
            <div id="aiResult" class="card p-8 hidden">
                <h3 class="text-xl font-semibold mb-6">–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI</h3>
                <div id="aiContent" class="bg-gray-50 p-6 rounded-lg mb-6 text-base"></div>
                <div class="flex gap-4">
                    <button onclick="copyToClipboard()" class="btn btn-outline">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button onclick="regenerateAI()" class="btn btn-primary">üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑</button>
                </div>
            </div>

            <!-- Usage Stats -->
            <div class="card p-6 mt-8">
                <h3 class="text-lg font-semibold mb-4">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold text-primary-600" id="requestsCount">0</div>
                        <div class="text-sm text-gray-600">–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ AI</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-green-600" id="tokensUsed">0</div>
                        <div class="text-sm text-gray-600">–¢–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-purple-600" id="avgResponseTime">0s</div>
                        <div class="text-sm text-gray-600">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Modal -->
        <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
            <div class="bg-white rounded-lg p-8 max-w-lg mx-4">
                <h3 class="text-xl font-semibold mb-6">–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                <div id="modalContent" class="mb-6 text-base"></div>
                <div class="flex gap-4">
                    <button onclick="copyToClipboard()" class="btn btn-primary flex-1">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button onclick="closeModal()" class="btn btn-outline flex-1">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Demo data
        const demoData = {
            drinks: [
                { name: "–≠–ª—å—Ñ–æ–≤—Å–∫–æ–µ –≤–∏–Ω–æ", effect: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1d4 HP", price: "5 –∑–æ–ª–æ—Ç—ã—Ö" },
                { name: "–û–≥–Ω–µ–Ω–Ω—ã–π —ç–ª—å", effect: "–î–∞–µ—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ–≥–Ω—é –Ω–∞ 1 —á–∞—Å", price: "3 –∑–æ–ª–æ—Ç—ã—Ö" },
                { name: "–õ—É–Ω–Ω—ã–π –Ω–µ–∫—Ç–∞—Ä", effect: "–£–ª—É—á—à–∞–µ—Ç –∑—Ä–µ–Ω–∏–µ –≤ —Ç–µ–º–Ω–æ—Ç–µ", price: "8 –∑–æ–ª–æ—Ç—ã—Ö" },
                { name: "–ì–Ω–æ–º—Å–∫–∏–π —ç–ª—å", effect: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞ +2 –Ω–∞ 10 –º–∏–Ω—É—Ç", price: "4 –∑–æ–ª–æ—Ç—ã—Ö" },
                { name: "–î—Ä–∞–∫–æ–Ω—å–µ –ø–∏–≤–æ", effect: "–î—ã—Ö–∞–Ω–∏–µ –æ–≥–Ω–µ–º 1 —Ä–∞–∑", price: "15 –∑–æ–ª–æ—Ç—ã—Ö" }
            ],
            npcs: [
                { name: "–¢–æ—Ä–∏–Ω –ñ–µ–ª–µ–∑–Ω–æ–±–æ—Ä–æ–¥", race: "–î–≤–∞—Ä—Ñ", profession: "–ö—É–∑–Ω–µ—Ü", personality: "–£–ø—Ä—è–º—ã–π, –Ω–æ —á–µ—Å—Ç–Ω—ã–π" },
                { name: "–≠–ª–∞—Ä–∞ –°–≤–µ—Ç–ª–∞—è", race: "–≠–ª—å—Ñ", profession: "–ú–∞–≥", personality: "–ú—É–¥—Ä–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è" },
                { name: "–ì—Ä–æ–≥ –°–∏–ª–∞—á", race: "–ü–æ–ª—É–æ—Ä–∫", profession: "–û—Ö—Ä–∞–Ω–Ω–∏–∫", personality: "–ì—Ä—É–±—ã–π, –Ω–æ –≤–µ—Ä–Ω—ã–π" },
                { name: "–ó–∞—Ä–∞ –¢–µ–Ω—å", race: "–ü–æ–ª—É—ç–ª—å—Ñ", profession: "–í–æ—Ä", personality: "–•–∏—Ç—Ä—ã–π –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–π" },
                { name: "–ú–∞—Ä–∫—É—Å –î–æ–±—Ä–æ—Å–µ—Ä–¥", race: "–ß–µ–ª–æ–≤–µ–∫", profession: "–¢–æ—Ä–≥–æ–≤–µ—Ü", personality: "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —â–µ–¥—Ä—ã–π" }
            ],
            potions: [
                { name: "–ó–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è", effect: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 2d4+2 HP", rarity: "–û–±—ã—á–Ω–æ–µ" },
                { name: "–ó–µ–ª—å–µ –Ω–µ–≤–∏–¥–∏–º–æ—Å—Ç–∏", effect: "–ù–µ–≤–∏–¥–∏–º–æ—Å—Ç—å –Ω–∞ 1 —á–∞—Å", rarity: "–†–µ–¥–∫–æ–µ" },
                { name: "–ó–µ–ª—å–µ –ø–æ–ª–µ—Ç–∞", effect: "–ü–æ–ª–µ—Ç –Ω–∞ 10 –º–∏–Ω—É—Ç", rarity: "–†–µ–¥–∫–æ–µ" },
                { name: "–ó–µ–ª—å–µ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–π —Å–∏–ª—ã", effect: "–°–∏–ª–∞ +4 –Ω–∞ 1 —á–∞—Å", rarity: "–ù–µ–æ–±—ã—á–Ω–æ–µ" },
                { name: "–ó–µ–ª—å–µ –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è", effect: "–í–∏–¥–∏—Ç —Å–∫—Ä—ã—Ç–æ–µ –Ω–∞ 1 —á–∞—Å", rarity: "–û—á–µ–Ω—å —Ä–µ–¥–∫–æ–µ" }
            ],
            events: [
                { name: "–í—Å—Ç—Ä–µ—á–∞ —Å —Ç–æ—Ä–≥–æ–≤—Ü–µ–º", description: "–û–¥–∏–Ω–æ–∫–∏–π —Ç–æ—Ä–≥–æ–≤–µ—Ü –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ–¥–∫–∏–µ —Ç–æ–≤–∞—Ä—ã", difficulty: "–õ–µ–≥–∫–æ–µ" },
                { name: "–ù–∞–ø–∞–¥–µ–Ω–∏–µ –±–∞–Ω–¥–∏—Ç–æ–≤", description: "–ì—Ä—É–ø–ø–∞ —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Ä–æ–≥—É", difficulty: "–°—Ä–µ–¥–Ω–µ–µ" },
                { name: "–ó–∞–±–ª—É–¥–∏–≤—à–∏–π—Å—è –ø—É—Ç–Ω–∏–∫", description: "–ü—É—Ç–Ω–∏–∫ –ø—Ä–æ—Å–∏—Ç –ø–æ–º–æ—â–∏ –Ω–∞–π—Ç–∏ –¥–æ—Ä–æ–≥—É", difficulty: "–õ–µ–≥–∫–æ–µ" },
                { name: "–î—Ä–µ–≤–Ω–∏–µ —Ä—É–∏–Ω—ã", description: "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏ –¥—Ä–µ–≤–Ω–µ–≥–æ —Å–æ–æ—Ä—É–∂–µ–Ω–∏—è", difficulty: "–°–ª–æ–∂–Ω–æ–µ" },
                { name: "–ú–∞–≥–∏—á–µ—Å–∫–∞—è –±—É—Ä—è", description: "–°—Ç—Ä–∞–Ω–Ω—ã–µ –ø–æ–≥–æ–¥–Ω—ã–µ —è–≤–ª–µ–Ω–∏—è", difficulty: "–û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ–µ" }
            ],
            taverns: [
                { name: "–ü—å—è–Ω—ã–π –¥—Ä–∞–∫–æ–Ω", description: "–®—É–º–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞ –¥–ª—è –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç–æ–≤", atmosphere: "–ë–æ–π–∫–∞—è" },
                { name: "–¢–∏—Ö–∞—è –≥–∞–≤–∞–Ω—å", description: "–°–ø–æ–∫–æ–π–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞", atmosphere: "–£—é—Ç–Ω–∞—è" },
                { name: "–ö—É–∑–Ω–∏—Ü–∞ –∏ –∫—Ä—É–∂–∫–∞", description: "–¢–∞–≤–µ—Ä–Ω–∞ —Ä—è–¥–æ–º —Å –∫—É–∑–Ω–∏—Ü–µ–π", atmosphere: "–†–∞–±–æ—á–∞—è" },
                { name: "–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç", description: "–≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞ –¥–ª—è –∑–Ω–∞—Ç–∏", atmosphere: "–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—á–Ω–∞—è" },
                { name: "–ü–æ–¥–∑–µ–º–µ–ª—å–µ", description: "–¢–∞–≤–µ—Ä–Ω–∞ –≤ –ø–æ–¥–≤–∞–ª–µ —Å—Ç–∞—Ä–æ–≥–æ –∑–¥–∞–Ω–∏—è", atmosphere: "–ú—Ä–∞—á–Ω–∞—è" }
            ]
        };

        let currentAIType = 'plot_twist';
        let requestCount = 0;
        let totalTokens = 0;
        let responseTimes = [];

        // Tab management
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.getElementById(tabName).classList.remove('hidden');
            
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'bg-primary-600', 'text-white'));
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
        }

        // Stage management
        function setStage(stage) {
            document.querySelectorAll('.stage-btn').forEach(btn => btn.classList.remove('active', 'bg-primary-600', 'text-white'));
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
            
            const stageNames = {
                hook: 'üé£ –ó–∞—Ü–µ–ø–∫–∞',
                exploration: 'üó∫Ô∏è –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
                combat: '‚öîÔ∏è –ë–æ–π',
                social: 'ü§ù –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ',
                puzzle: 'üß© –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞',
                climax: 'üî• –ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è',
                resolution: 'üèÅ –†–∞–∑–≤—è–∑–∫–∞'
            };
            document.getElementById('currentStage').textContent = stageNames[stage];
        }

        // AI type management
        function setAIType(type) {
            currentAIType = type;
            document.querySelectorAll('.ai-type-btn').forEach(btn => btn.classList.remove('active', 'bg-primary-600', 'text-white'));
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
        }

        // Random generation with better randomization
        function generateRandom(type) {
            let data, title, content;
            
            // Add timestamp to make randomization more unpredictable
            const seed = Date.now() + Math.random();
            const randomIndex = Math.floor((seed % 1000) % demoData[type].length);
            
            switch(type) {
                case 'npc':
                    data = demoData.npcs[randomIndex];
                    title = 'üë§ –°–ª—É—á–∞–π–Ω—ã–π NPC';
                    content = `
                        <strong>–ò–º—è:</strong> ${data.name}<br>
                        <strong>–†–∞—Å–∞:</strong> ${data.race}<br>
                        <strong>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è:</strong> ${data.profession}<br>
                        <strong>–•–∞—Ä–∞–∫—Ç–µ—Ä:</strong> ${data.personality}
                    `;
                    break;
                case 'tavern':
                    data = demoData.taverns[randomIndex];
                    title = 'üè™ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–≤–µ—Ä–Ω—ã';
                    content = `
                        <strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> ${data.name}<br>
                        <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${data.description}<br>
                        <strong>–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞:</strong> ${data.atmosphere}
                    `;
                    break;
                case 'potion':
                    data = demoData.potions[randomIndex];
                    title = 'üß™ –°–ª—É—á–∞–π–Ω–æ–µ –∑–µ–ª—å–µ';
                    content = `
                        <strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> ${data.name}<br>
                        <strong>–≠—Ñ—Ñ–µ–∫—Ç:</strong> ${data.effect}<br>
                        <strong>–†–µ–¥–∫–æ—Å—Ç—å:</strong> ${data.rarity}
                    `;
                    break;
                case 'drink':
                    data = demoData.drinks[randomIndex];
                    title = 'üç∫ –°–ª—É—á–∞–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫';
                    content = `
                        <strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> ${data.name}<br>
                        <strong>–≠—Ñ—Ñ–µ–∫—Ç:</strong> ${data.effect}<br>
                        <strong>–¶–µ–Ω–∞:</strong> ${data.price}
                    `;
                    break;
                case 'event':
                    data = demoData.events[randomIndex];
                    title = 'üó°Ô∏è –°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ';
                    content = `
                        <strong>–°–æ–±—ã—Ç–∏–µ:</strong> ${data.name}<br>
                        <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${data.description}<br>
                        <strong>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</strong> ${data.difficulty}
                    `;
                    break;
            }
            
            showModal(title, content);
        }

        // Show table data
        function showTableData(table) {
            const tableNames = {
                drinks: 'üç∫ –ù–∞–ø–∏—Ç–∫–∏',
                npcs: 'üë§ NPC',
                potions: 'üß™ –ó–µ–ª—å—è',
                events: 'üó°Ô∏è –°–æ–±—ã—Ç–∏—è –≤ –ø—É—Ç–∏',
                taverns: 'üè™ –ù–∞–∑–≤–∞–Ω–∏—è —Ç–∞–≤–µ—Ä–Ω'
            };
            
            document.getElementById('tableTitle').textContent = tableNames[table];
            const content = document.getElementById('tableContent');
            content.innerHTML = '';
            
            demoData[table].forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'border rounded p-4 text-base';
                div.innerHTML = `<strong>${index + 1}.</strong> ${Object.values(item).join(' | ')}`;
                content.appendChild(div);
            });
            
            document.getElementById('tableData').classList.remove('hidden');
        }

        function hideTableData() {
            document.getElementById('tableData').classList.add('hidden');
        }

        // Dice rolling
        function rollDice() {
            const result = Math.floor(Math.random() * 20) + 1;
            showModal('üé≤ –ë—Ä–æ—Å–æ–∫ –∫–æ—Å—Ç–µ–π', `–í—ã–ø–∞–ª–æ: <strong>${result}</strong>`);
        }

        // Generate AI suggestion (with backend proxy)
        async function generateAISuggestion() {
            const context = document.getElementById('sessionContext').value;
            const generateBtn = document.getElementById('generateBtn');
            const aiContent = document.getElementById('aiContent');

            // Show loading
            generateBtn.disabled = true;
            generateBtn.innerHTML = 'üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º...';
            aiContent.innerHTML = '<div class="loading h-8 rounded"></div>';
            document.getElementById('aiResult').classList.remove('hidden');

            const startTime = Date.now();

            try {
                // Try to use backend proxy first
                const response = await fetch('/api/orchestrate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type: currentAIType,
                        context: context,
                        sessionStage: 'general'
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    const endTime = Date.now();
                    const responseTime = (endTime - startTime) / 1000;

                    aiContent.innerHTML = data.suggestion.replace(/\n/g, '<br>');
                    updateStats(data.tokens || 0, responseTime);
                } else {
                    // Fallback to demo suggestions
                    generateDemoSuggestion();
                }

            } catch (error) {
                // Fallback to demo suggestions
                generateDemoSuggestion();
            }

            // Reset button
            generateBtn.disabled = false;
            generateBtn.innerHTML = 'ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é AI';
        }

        // Fallback demo suggestion generation
        function generateDemoSuggestion() {
            const suggestions = {
                plot_twist: [
                    "–í–Ω–µ–∑–∞–ø–Ω–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç - —ç—Ç–æ –¥–∞–≤–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –±—Ä–∞—Ç –æ–¥–Ω–æ–≥–æ –∏–∑ –∏–≥—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø—Ä–æ–∫–ª—è—Ç –∏ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω –≤ –º–æ–Ω—Å—Ç—Ä–∞.",
                    "–î—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—â—É—Ç –≥–µ—Ä–æ–∏, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–æ–º –∫ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—é —Å–ø—è—â–µ–≥–æ –±–æ–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –º–∏—Ä.",
                    "–û–¥–∏–Ω –∏–∑ NPC, –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–≤–µ—Ä—è—é—Ç –∏–≥—Ä–æ–∫–∏, –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —à–ø–∏–æ–Ω–æ–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, —Å–æ–±–∏—Ä–∞—é—â–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–µ."
                ],
                npc_dialogue: [
                    "\"–Ø –≤–∏–¥–µ–ª, –∫–∞–∫ —Ç–≤–æ–∏ –≥–ª–∞–∑–∞ —Å–≤–µ—Ç—è—Ç—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ... –¢—ã –Ω–µ —Å–æ–≤—Å–µ–º —á–µ–ª–æ–≤–µ–∫, –Ω–µ —Ç–∞–∫ –ª–∏?\" - –≥–æ–≤–æ—Ä–∏—Ç —Å—Ç–∞—Ä—ã–π –º—É–¥—Ä–µ—Ü, –ø—Ä–∏—Å—Ç–∞–ª—å–Ω–æ –≥–ª—è–¥—è –Ω–∞ –∏–≥—Ä–æ–∫–∞.",
                    "\"–í —ç—Ç–∏—Ö –∑–µ–º–ª—è—Ö –∫–∞–∂–¥—ã–π –∫–∞–º–µ–Ω—å –ø–æ–º–Ω–∏—Ç –¥—Ä–µ–≤–Ω–∏–µ –≤–æ–π–Ω—ã. –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã, –∏–±–æ –ø—Ä–æ—à–ª–æ–µ –∏–º–µ–µ—Ç –ø—Ä–∏–≤—ã—á–∫—É –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è.\"",
                    "\"–ú–æ–π –æ—Ç–µ—Ü –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∞—è —Å–∏–ª–∞ –Ω–µ –≤ –º–µ—á–µ, –∞ –≤ —Ç–æ–º, –∫–∞–∫ —Ç—ã –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å. –ù–æ –∏–Ω–æ–≥–¥–∞... –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –æ—á–µ–Ω—å –æ—Å—Ç—Ä—ã–π –º–µ—á.\""
                ],
                scene_description: [
                    "–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç –ø—Ä–æ–±–∏–≤–∞–µ—Ç—Å—è —Å–∫–≤–æ–∑—å –≥—É—Å—Ç—ã–µ –æ–±–ª–∞–∫–∞, —Å–æ–∑–¥–∞–≤–∞—è –ø—Ä–∏–∑—Ä–∞—á–Ω—ã–µ —Ç–µ–Ω–∏ –Ω–∞ –¥—Ä–µ–≤–Ω–∏—Ö —Å—Ç–µ–Ω–∞—Ö –∑–∞–º–∫–∞. –í–æ–∑–¥—É—Ö –Ω–∞–ø–æ–ª–Ω–µ–Ω –∑–∞–ø–∞—Ö–æ–º –≤–ª–∞–∂–Ω–æ–π –∑–µ–º–ª–∏ –∏ —á–µ–≥–æ-—Ç–æ –±–æ–ª–µ–µ –¥—Ä–µ–≤–Ω–µ–≥–æ, –±–æ–ª–µ–µ —Ç–µ–º–Ω–æ–≥–æ. –í–¥–∞–ª–µ–∫–µ —Å–ª—ã—à–∏—Ç—Å—è –≤–æ–π –≤–æ–ª–∫–∞, –∞ –≤–µ—Ç–µ—Ä —à–µ–ø—á–µ—Ç –∑–∞–±—ã—Ç—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–Ω–∞–º–∏.",
                    "–¢–∞–≤–µ—Ä–Ω–∞ –≥—É–¥–∏—Ç –æ—Ç –≥–æ–ª–æ—Å–æ–≤ –∏ —Å–º–µ—Ö–∞. –î—ã–º –æ—Ç —Ç—Ä—É–± —Å–æ–∑–¥–∞–µ—Ç –º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –∞ —Å–≤–µ—Ç —Ñ–∞–∫–µ–ª–æ–≤ —Ç–∞–Ω—Ü—É–µ—Ç –Ω–∞ —Å—Ç–µ–Ω–∞—Ö, —É–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö —Ç—Ä–æ—Ñ–µ—è–º–∏ –∏ —Å—Ç–∞—Ä—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –ó–∞ –æ–¥–Ω–∏–º –∏–∑ —Å—Ç–æ–ª–æ–≤ –≥—Ä—É–ø–ø–∞ –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç–æ–≤ –≥–æ—Ä—è—á–æ –æ–±—Å—É–∂–¥–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª—É—Ö–∏ –æ —Å–æ–∫—Ä–æ–≤–∏—â–∞—Ö.",
                    "–î—Ä–µ–≤–Ω–∏–π –ª–µ—Å –æ–∫—Ä—É–∂–∞–µ—Ç –≤–∞—Å —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω, –µ–≥–æ –≤–µ—Ç–≤–∏ —Å–ø–ª–µ—Ç–∞—é—Ç—Å—è –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π, —Å–æ–∑–¥–∞–≤–∞—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–æ–¥. –í–æ–∑–¥—É—Ö –Ω–∞–ø–æ–ª–Ω–µ–Ω –∞—Ä–æ–º–∞—Ç–æ–º —Ö–≤–æ–∏ –∏ —Ü–≤–µ—Ç–æ–≤, –∞ –≤–¥–∞–ª–µ–∫–µ —Å–ª—ã—à–∏—Ç—Å—è –∂—É—Ä—á–∞–Ω–∏–µ —Ä—É—á—å—è. –ó–¥–µ—Å—å —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –¥—Ä–µ–≤–Ω—è—è –º–∞–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–Ω–∏–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ—Ä–µ–≤–æ –∏ –∫–∞–∂–¥—ã–π –∫–∞–º–µ–Ω—å."
                ],
                loot_suggestion: [
                    "–í —Å—É–Ω–¥—É–∫–µ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ: –º–∞–≥–∏—á–µ—Å–∫–∏–π –∫–∏–Ω–∂–∞–ª +1, 50 –∑–æ–ª–æ—Ç—ã—Ö –º–æ–Ω–µ—Ç, —Å–≤–∏—Ç–æ–∫ —Å –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ–º '–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä', –∏ —Å—Ç—Ä–∞–Ω–Ω—ã–π –∞–º—É–ª–µ—Ç —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ä—É–Ω–∞–º–∏.",
                    "–ü–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –±–æ—Å—Å–æ–º –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ: –∫–æ–ª—å—Ü–æ –∑–∞—â–∏—Ç—ã +1, –∑–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è, –¥—Ä–µ–≤–Ω—é—é –∫–∞—Ä—Ç—É —Å–æ–∫—Ä–æ–≤–∏—â, –∏ –∫–ª—é—á –æ—Ç –ø–æ—Ç–∞–π–Ω–æ–π –¥–≤–µ—Ä–∏ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ.",
                    "–ò—Å—Å–ª–µ–¥—É—è —Ä—É–∏–Ω—ã, –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ: —ç–ª—å—Ñ–∏–π—Å–∫–∏–π –ª—É–∫ +2, –º–µ—à–æ–∫ —Å –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏ (100 –∑–æ–ª–æ—Ç—ã—Ö), —Å–≤–∏—Ç–æ–∫ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏, –∏ –¥–Ω–µ–≤–Ω–∏–∫ —Å –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π."
                ],
                skill_check: [
                    "–ü—Ä–æ–≤–µ—Ä–∫–∞ –õ–æ–≤–∫–æ—Å—Ç–∏ (DC 15): –ü—Ä—ã–∂–æ–∫ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø–∞—Å—Ç—å —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –∏ –≥—Ä–∞—Ü–∏–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ, –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ - –ø–∞–¥–µ–Ω–∏–µ –∏ —É—Ä–æ–Ω.",
                    "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ú—É–¥—Ä–æ—Å—Ç–∏ (DC 12): –ó–∞–º–µ—Ç–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å–ª–µ–¥—ã –Ω–∞ –∑–µ–º–ª–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–∞–π–Ω–æ–º—É —É–±–µ–∂–∏—â—É –±–∞–Ω–¥–∏—Ç–æ–≤ –∏–ª–∏ –∫ —Å–æ–∫—Ä–æ–≤–∏—â–∞–º.",
                    "–ü—Ä–æ–≤–µ—Ä–∫–∞ –•–∞—Ä–∏–∑–º—ã (DC 14): –£–±–µ–¥–∏—Ç—å –º–µ—Å—Ç–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –≤ –¥–µ—Ä–µ–≤–Ω–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –≤–∞—à–∏–º –∫–≤–µ—Å—Ç–æ–º."
                ],
                combat_encounter: [
                    "–ë–æ–µ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞: –ì—Ä—É–ø–ø–∞ –≥–æ–±–ª–∏–Ω–æ–≤ (4 —à—Ç.) –∑–∞—Å–∞–¥–∏–ª–∞ –¥–æ—Ä–æ–≥—É. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∞–∫—Ç–∏–∫—É –∑–∞—Å–∞–¥—ã –∏ —Å—Ç—Ä–µ–ª—è—é—Ç –∏–∑ –ª—É–∫–æ–≤ –∏–∑ —É–∫—Ä—ã—Ç–∏–π. –û–∫—Ä—É–∂–µ–Ω–∏–µ: –≥—É—Å—Ç–æ–π –ª–µ—Å, —É–∑–∫–∞—è —Ç—Ä–æ–ø–∞, –≤–∞–ª—É–Ω—ã –¥–ª—è —É–∫—Ä—ã—Ç–∏—è.",
                    "–ë–æ–µ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞: –î–≤–∞ –æ–≥—Ä–∞-–±–µ—Ä—Å–µ—Ä–∫–∞ –∞—Ç–∞–∫—É—é—Ç –∏–∑ –∑–∞—Å–∞–¥—ã. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —è—Ä–æ—Å—Ç—å –∏ –∞—Ç–∞–∫—É—é—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤. –û–∫—Ä—É–∂–µ–Ω–∏–µ: –∫–∞–º–µ–Ω–∏—Å—Ç–∞—è –º–µ—Å—Ç–Ω–æ—Å—Ç—å, –ø–µ—â–µ—Ä–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.",
                    "–ë–æ–µ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞: –°—Ç–∞—è –≤–æ–ª–∫–æ–≤ (6 —à—Ç.) –æ–∫—Ä—É–∂–∞–µ—Ç –≥—Ä—É–ø–ø—É. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∞–∫—Ç–∏–∫—É —Å—Ç–∞–∏ –∏ –ø—ã—Ç–∞—é—Ç—Å—è –æ—Ç—Ä–µ–∑–∞—Ç—å –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –û–∫—Ä—É–∂–µ–Ω–∏–µ: –æ—Ç–∫—Ä—ã—Ç–∞—è —Ä–∞–≤–Ω–∏–Ω–∞, –Ω–æ—á—å, –ø–æ–ª–Ω–∞—è –ª—É–Ω–∞."
                ]
            };

            const seed = Date.now() + Math.random();
            const randomIndex = Math.floor((seed % 1000) % suggestions[currentAIType].length);
            const suggestion = suggestions[currentAIType][randomIndex];
            
            document.getElementById('aiContent').innerHTML = suggestion;
            updateStats(50, 0.5); // Demo stats
        }

        // Regenerate AI response
        function regenerateAI() {
            generateAISuggestion();
        }

        // Update usage statistics
        function updateStats(tokens, responseTime) {
            requestCount++;
            totalTokens += tokens;
            responseTimes.push(responseTime);
            
            const avgTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;
            
            document.getElementById('requestsCount').textContent = requestCount;
            document.getElementById('tokensUsed').textContent = totalTokens;
            document.getElementById('avgResponseTime').textContent = avgTime.toFixed(1) + 's';
        }

        // Modal management
        function showModal(title, content) {
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('resultModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('resultModal').classList.add('hidden');
        }

        // Clipboard functionality
        function copyToClipboard() {
            const content = document.getElementById('aiContent') || document.getElementById('modalContent');
            if (content) {
                navigator.clipboard.writeText(content.textContent || content.innerText);
                alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            }
        }

        // Close modal when clicking outside
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set default active tab
            document.querySelector('.tab-btn').classList.add('active', 'bg-primary-600', 'text-white');
        });
    </script>
</body>
</html>
